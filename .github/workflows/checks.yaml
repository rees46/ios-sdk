name: Check PR

on:
  pull_request:
    branches:
      - '*'

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Run reusable iOS checks
        uses: rees46/workflow/.github/workflows/reusable-ios-checks.yaml@master
        with:
          cocoapodsToken: ${{ secrets.COCOAPODS_TOKEN }}
          googleServicesString: ${{ secrets.GOOGLE_SERVICES_IOS_FILE_AS_BASE64_STRING }}

      - name: Delete GoogleService-Info.plist files
        if: success()  # File will be delete if workflow success
        run: |
          find . -name 'GoogleService-Info.plist' -type f -delete
